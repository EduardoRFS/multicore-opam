opam-version: "2.0"
maintainer:   "defree@gmail.com"
authors:      "The Merlin team"
synopsis:     "Reads config files for merlin"
homepage:     "https://github.com/ocaml/merlin"
bug-reports:  "https://github.com/ocaml/merlin/issues"
dev-repo: "git+https://github.com/ocaml/merlin.git"
build: [
  ["dune" "subst"] {pinned}
  ["dune" "build" "-p" name "-j" jobs]
]
depends: [
  "ocaml" {>= "4.02.1" & < "4.12"}
  "dune" {>= "1.8.0"}
  "yojson" {>= "1.6.0"}
  "ocamlfind" {>= "1.6.0"}
  "csexp" {>= "1.2.3"}
  "result" {>= "1.5"}
]

url {
  src:
    "https://github.com/ocaml/merlin/releases/download/v3.4.1/merlin-v3.4.1.tbz"
  checksum: [
    "sha256=e7f28ca520d1ab4a58e8ba876b665b1ecf9917cee7e5b3e3330afbd1d12a9e2a"
    "sha512=40ae93397aea031c1b4450998b448fc1df9671d612be0a02986688e5dd1390ced1c31bb2cdde9c6b52f8be841ca9fd1931fc302b26ef19cb2e88925d3b360c37"
  ]
}

patches: [
    "0001-Local_store-change-API.patch"
    "0002-fix-build-on-all-versions.patch"
    "0003-more-refs-in-the-Local_store.patch"
    "0004-Destruct-reorganize-ans-add-more-tests-1189.patch"
    "0005-The-dot-merlin-reader-package-is-always-only-valid-f.patch"
    "0007-Fix-Destruct-ill-typed-completions-1194.patch"
    "0008-multicore-initial-typing-import.patch"
    "0009-multicore-initial-parsing-import.patch"
    "0010-multicore-initial-merlin_specific-import.patch"
]


extra-files: [
    ["0001-Local_store-change-API.patch" "md5=ebeb9e88d2b2ec436c7aa71a62cd3018"]
    ["0002-fix-build-on-all-versions.patch" "md5=3ed1c33fdf65080e3ed6a7cb59e7f096"]
    ["0003-more-refs-in-the-Local_store.patch" "md5=fe07f2392f4dba8c1ce9d0f8a13ad819"]
    ["0004-Destruct-reorganize-ans-add-more-tests-1189.patch" "md5=4aa48e8beee97b8fd34655d1d1af5577"]
    ["0005-The-dot-merlin-reader-package-is-always-only-valid-f.patch" "md5=f13d893c04b269c7a347c1ff38b66850"]
    ["0007-Fix-Destruct-ill-typed-completions-1194.patch" "md5=f5ffbb5ebd43ecebc2d714372886211d"]
    ["0008-multicore-initial-typing-import.patch" "md5=731dd6a4b5282012ab1476fece4f5d96"]
    ["0009-multicore-initial-parsing-import.patch" "md5=5eceb70faf9b48decea7330beaf265fc"]
    ["0010-multicore-initial-merlin_specific-import.patch" "md5=049479f1585e3316cfa614841a9caf3b"]
]
